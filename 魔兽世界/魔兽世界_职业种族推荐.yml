app:
  description: åŸºäºé­”å…½ä¸–ç•Œå®˜ç½‘æ•°æ®æä¾›çš„è§’è‰²æ‰®æ¼”å¯¹è¯å¼èŒä¸šç§æ—æ¨èå·¥å…·
  icon: ğŸ¤–
  icon_background: '#FFEAD5'
  mode: advanced-chat
  name: é­”å…½ä¸–ç•Œ_èŒä¸šç§æ—æ¨è
  use_icon_as_answer_icon: false
dependencies:
- current_identifier: null
  type: marketplace
  value:
    marketplace_plugin_unique_identifier: langgenius/deepseek:0.0.9@8cc65e3d2ce11b03d377ee008dc699c7016601c2646a09c983fcf7c1fd7827ee
    version: null
kind: app
version: 0.5.0
workflow:
  conversation_variables:
  - description: é’ˆå¯¹å¼€åœºç™½çš„å›å¤æŒ‡å¯¼
    id: 29114428-6d33-4eac-93f3-552e9efe1e72
    name: first_response_guideline
    selector:
    - conversation
    - first_response_guideline
    value: ''
    value_type: string
  - description: å¼€åœºç™½
    id: 74d6e528-ffd7-414a-b017-43927061a537
    name: first_question
    selector:
    - conversation
    - first_question
    value: ''
    value_type: string
  environment_variables: []
  features:
    file_upload:
      allowed_file_extensions:
      - .JPG
      - .JPEG
      - .PNG
      - .GIF
      - .WEBP
      - .SVG
      allowed_file_types:
      - image
      allowed_file_upload_methods:
      - local_file
      - remote_url
      enabled: false
      fileUploadConfig:
        audio_file_size_limit: 50
        batch_count_limit: 5
        file_size_limit: 15
        image_file_size_limit: 10
        video_file_size_limit: 100
        workflow_file_upload_limit: 10
      image:
        enabled: false
        number_limits: 3
        transfer_methods:
        - local_file
        - remote_url
      number_limits: 3
    opening_statement: 'ï¼ˆé…’é¦†è€æ¿æ”¾ä¸‹æ‰‹ä¸­æ“¦æ‹­çš„é…’æ¯ï¼Œé—¨ä¸Šçš„é“ƒé“›å£°éšç€ä½ çš„è¸å…¥è½»è½»å“èµ·ã€‚ä»–æŠ¬å¤´æ‰“é‡ç€ä½ ä»é—¨å£èµ°æ¥ï¼Œé´å­è¸©åœ¨æœ¨åœ°æ¿ä¸Šå‘å‡ºè½»å¾®çš„å±å‘€å£°ï¼Œç›´åˆ°ä½ åœ¨å§å°å‰åä¸‹ã€‚é…’é¦†é‡Œå¼¥æ¼«ç€éº¦é…’å’Œçƒ¤è‚‰é¦™æ°”ï¼Œæ¸©æš–çš„ç‚‰ç«åœ¨è§’è½å™¼å•ªä½œå“ï¼Œå‡ ä¸ªçŸ®äººæ­£ä½å£°äº¤è°ˆã€‚è€æ¿éœ²å‡ºä¸€æŠ¹å‹å¥½çš„ç¬‘å®¹ï¼Œèº«ä½“å¾®å¾®å‰å€¾ï¼Œæ‰‹è‚˜æ’‘åœ¨å§å°ä¸Šã€‚ï¼‰

      é…’é¦†è€æ¿ï¼šâ€œå•Šï¼Œä¸€ä½è¿œé“è€Œæ¥çš„å®¢äººï¼çœ‹ä½ é£å°˜ä»†ä»†çš„æ ·å­ï¼Œæ˜¯ä»è’éƒŠé‡å²­çš„æ—§è·¯èµ¶æ¥ï¼Œè¿˜æ˜¯ä¹˜èˆ¹è·¨è¿‡æ— å°½ä¹‹æµ·ï¼Ÿæˆ‘æ˜¯è¿™çš„è€æ¿ã€‚åå§ï¼Œåˆ«æ‹˜æŸâ€”â€”è¿™å„¿çš„é…’èƒ½æ´—å»ä¸€èº«ç–²æƒ«ã€‚ä¸è¿‡è¯è¯´å›æ¥ï¼Œæˆ‘è§è¿‡æ— æ•°åƒä½ è¿™æ ·çš„å†’é™©è€…ï¼Œæ¯ä¸ªäººéƒ½æœ‰è‡ªå·±çš„æ•…äº‹å’Œé“è·¯â€¦â€¦å‘Šè¯‰æˆ‘ï¼Œæ˜¯ä»€ä¹ˆé£æŠŠä½ å¹åˆ°è¿™é…’é¦†æ¥çš„ï¼Ÿæ˜¯å•çº¯æƒ³å–ä¸€æ¯æš–æš–èº«å­ï¼Œè¿˜æ˜¯å¿ƒé‡Œæ—©æœ‰äº†äº›æ¨¡ç³Šçš„å¿µå¤´ï¼Œæƒ³åœ¨è¿™å¹¿é˜”ä¸–ç•Œé‡Œæ‰¾ä¸ªå±äºè‡ªå·±çš„ä½ç½®ï¼Ÿâ€'
    retriever_resource:
      enabled: true
    sensitive_word_avoidance:
      enabled: false
    speech_to_text:
      enabled: false
    suggested_questions: []
    suggested_questions_after_answer:
      enabled: false
    text_to_speech:
      enabled: false
      language: ''
      voice: ''
  graph:
    edges:
    - data:
        sourceType: llm
        targetType: answer
      id: llm-answer
      selected: false
      source: llm
      sourceHandle: source
      target: answer
      targetHandle: target
      type: custom
    - data:
        isInLoop: false
        sourceType: llm
        targetType: knowledge-retrieval
      id: 1770122768993-source-1770119206846-target
      selected: false
      source: '1770122768993'
      sourceHandle: source
      target: '1770119206846'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: question-classifier
        targetType: answer
      id: 1770179022421-2-1770179245235-target
      selected: false
      source: '1770179022421'
      sourceHandle: '2'
      target: '1770179245235'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: question-classifier
        targetType: question-classifier
      id: 1770179022421-1-1770379526302-target
      selected: false
      source: '1770179022421'
      sourceHandle: '1'
      target: '1770379526302'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: question-classifier
        targetType: llm
      id: 1770379526302-2-1770380223078-target
      selected: false
      source: '1770379526302'
      sourceHandle: '2'
      target: '1770380223078'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: llm
        targetType: knowledge-retrieval
      id: 1770380223078-source-17703806152700-target
      selected: false
      source: '1770380223078'
      sourceHandle: source
      target: '17703806152700'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: knowledge-retrieval
        targetType: llm
      id: 17703806152700-source-17703806754120-target
      selected: false
      source: '17703806152700'
      sourceHandle: source
      target: '17703806754120'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: llm
        targetType: answer
      id: 17703806754120-source-answer-target
      selected: false
      source: '17703806754120'
      sourceHandle: source
      target: answer
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: assigner
        targetType: question-classifier
      id: 1770575052659-source-1770179022421-target
      source: '1770575052659'
      sourceHandle: source
      target: '1770179022421'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: if-else
        targetType: assigner
      id: 1770574037546-true-1770575052659-target
      source: '1770574037546'
      sourceHandle: 'true'
      target: '1770575052659'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: question-classifier
        targetType: llm
      id: 1770379526302-1-1770122768993-target
      source: '1770379526302'
      sourceHandle: '1'
      target: '1770122768993'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: knowledge-retrieval
        targetType: llm
      id: 1770119206846-source-llm-target
      source: '1770119206846'
      sourceHandle: source
      target: llm
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: start
        targetType: if-else
      id: 1770118607248-source-1770574037546-target
      source: '1770118607248'
      sourceHandle: source
      target: '1770574037546'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: if-else
        targetType: assigner
      id: 1770574037546-true-1770575683326-target
      source: '1770574037546'
      sourceHandle: 'true'
      target: '1770575683326'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: assigner
        targetType: question-classifier
      id: 1770575683326-source-1770179022421-target
      source: '1770575683326'
      sourceHandle: source
      target: '1770179022421'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: if-else
        targetType: assigner
      id: 1770574037546-false-1770575919957-target
      source: '1770574037546'
      sourceHandle: 'false'
      target: '1770575919957'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: if-else
        targetType: assigner
      id: 1770574037546-false-1770575925535-target
      source: '1770574037546'
      sourceHandle: 'false'
      target: '1770575925535'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: assigner
        targetType: question-classifier
      id: 1770575919957-source-1770179022421-target
      source: '1770575919957'
      sourceHandle: source
      target: '1770179022421'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: assigner
        targetType: question-classifier
      id: 1770575925535-source-1770179022421-target
      source: '1770575925535'
      sourceHandle: source
      target: '1770179022421'
      targetHandle: target
      type: custom
      zIndex: 0
    nodes:
    - data:
        selected: false
        title: ç”¨æˆ·è¾“å…¥
        type: start
        variables: []
      height: 73
      id: '1770118607248'
      position:
        x: 0
        y: 148
      positionAbsolute:
        x: 0
        y: 148
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        context:
          enabled: true
          variable_selector:
          - '1770119206846'
          - result
        memory:
          query_prompt_template: '{{#sys.query#}}


            {{#sys.files#}}'
          role_prefix:
            assistant: ''
            user: ''
          window:
            enabled: true
            size: 20
        model:
          completion_params: {}
          mode: chat
          name: deepseek-reasoner
          provider: langgenius/deepseek/deepseek
        prompt_config:
          jinja2_variables: []
        prompt_template:
        - edition_type: basic
          id: 2b37e594-98ab-402c-9449-8773f0ef5460
          jinja2_text: ''
          role: system
          text: '<system_purpose>

            ä½ æ˜¯ä¸€ä¸ªã€Šé­”å…½ä¸–ç•Œã€‹ä¸–ç•Œè§‚ä¸‹çš„æ‰®æ¼”é…’é¦†è€æ¿ã€‚

            </system_purpose>



            <character_setting>

            - èº«ä»½ï¼šè‰¾æ³½æ‹‰æ–¯å¤§é™†æŸå¤„æ¸©æƒ…é…’é¦†çš„è€æ¿ã€‚

            - è¯­æ°”ï¼šäº²åˆ‡ã€ç¿æ™ºã€å¸¦æœ‰å†’é™©æ°”æ¯ï¼Œå¤šç”¨å£è¯­åŒ–çš„è§’è‰²æ‰®æ¼”æè¿°ã€‚

            </character_setting>



            <task_rules>

            - æ ¸å¿ƒä»»åŠ¡ï¼šæ ¹æ® <knowledge_base> ä¸­çš„ä¿¡æ¯ï¼Œé€šè¿‡å¯¹è¯å¼•å¯¼ç©å®¶é€‰æ‹©èŒä¸šå’Œç§æ—ã€‚

            - å¼•å¯¼è§„åˆ™ï¼š

            Â  1. è€ƒå¯Ÿç‚¹ï¼šå–„æ¶è§‚ã€åŠ›é‡å€¾å‘ï¼ˆé­”æ³•/ç‰©ç†ï¼‰ã€ä½œæˆ˜è·ç¦»ï¼ˆè¿‘æˆ˜/è¿œç¨‹ï¼‰ã€èŒè´£ï¼ˆå¦å…‹/æ²»ç–—/è¾“å‡ºï¼‰ã€æ­¦å™¨ç­‰ã€‚

            Â  2. å½¢å¼ï¼šæ¯æ¬¡å¯¹è¯ä»…æå‡º 2-4 ä¸ªé—®é¢˜ï¼Œä¸¥ç¦ä½¿ç”¨ç¼–å·åˆ—è¡¨ï¼ˆå¦‚ 1. 2. 3.ï¼‰ã€‚

            Â  3. é™åˆ¶ï¼š20 è½®å¯¹è¯å†…å¿…é¡»ç»™å‡ºæ˜ç¡®å»ºè®®ã€å»ºè®®çš„èŒä¸šå’Œç§æ—å¿…é¡»æ˜¯é­”å…½ä¸–ç•Œä¸­ç©å®¶å¯é€‰æ‹©ï¼›å®Œæˆæ¨èå‰ä¸¥ç¦é€éœ²ä»»ä½•å€¾å‘æ€§ç»“è®ºï¼›ç¦æ­¢ä½¿ç”¨æ¸¸æˆæœ¯è¯­ã€‚

            </task_rules>



            <knowledge_base>

            {{#1770119206846.result#}}

            </knowledge_base>


            {{#conversation.first_question#}}


            {{#conversation.first_response_guideline#}}'
        selected: false
        title: ä¸»è¦å›å¤é€»è¾‘
        type: llm
        vision:
          enabled: false
      height: 88
      id: llm
      position:
        x: 2474
        y: 562
      positionAbsolute:
        x: 2474
        y: 562
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        answer: '{{#llm.text#}}

          {{#17703806754120.text#}}'
        selected: false
        title: æœ€ç»ˆå›å¤
        type: answer
        variables: []
      height: 122
      id: answer
      position:
        x: 2836
        y: 395
      positionAbsolute:
        x: 2836
        y: 395
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        dataset_ids:
        - hK9chCbrtmWQKT7Tgj593kGCGzbxMYdlJ9n2y9pNerhLIQl9Lx1+AQm0fh2/a3tB
        metadata_filtering_mode: automatic
        metadata_model_config:
          completion_params:
            response_format: json_object
            temperature: 0.7
          mode: chat
          name: deepseek-chat
          provider: langgenius/deepseek/deepseek
        multiple_retrieval_config:
          reranking_enable: false
          reranking_mode: reranking_model
          top_k: 4
        query_attachment_selector: []
        query_variable_selector:
        - '1770122768993'
        - text
        retrieval_mode: multiple
        selected: false
        title: çŸ¥è¯†æ£€ç´¢
        type: knowledge-retrieval
      height: 90
      id: '1770119206846'
      position:
        x: 2132
        y: 561
      positionAbsolute:
        x: 2132
        y: 561
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        context:
          enabled: false
          variable_selector: []
        memory:
          query_prompt_template: '{{#sys.query#}}


            {{#sys.files#}}'
          role_prefix:
            assistant: ''
            user: ''
          window:
            enabled: false
            size: 50
        model:
          completion_params:
            response_format: json_object
          mode: chat
          name: deepseek-chat
          provider: langgenius/deepseek/deepseek
        prompt_template:
        - id: 1c4f1bf1-69be-4e5c-b8f2-7e6cd1973626
          role: system
          text: "Â  Â  # ä»»åŠ¡\nÂ  Â  æ ¹æ®ç”¨æˆ·å¯¹è¯å†…å®¹ï¼Œç”ŸæˆçŸ¥è¯†åº“æ£€ç´¢æ¡ä»¶\nÂ  Â  \nÂ  Â  # è¾“å…¥åˆ†æ\nÂ  Â  1. æå–å…³é”®è¯ï¼šä»å¯¹è¯ä¸­æå–èŒä¸šã€ç§æ—ã€ç‰¹æ€§ç›¸å…³è¯æ±‡\n\
            Â  Â  2. è¯†åˆ«æ„å›¾ï¼šåˆ¤æ–­ç”¨æˆ·å½“å‰è®¨è®ºçš„ä¸»é¢˜é˜¶æ®µ\nÂ  Â  3. æ¨æ–­éœ€æ±‚ï¼šåŸºäºå¯¹è¯å†å²æ¨æµ‹å¯èƒ½éœ€è¦çš„èƒŒæ™¯çŸ¥è¯†\nÂ  Â  \nÂ  Â  #\
            \ è¾“å‡ºæ ¼å¼\nJSONæ ¼å¼\nÂ  Â  {\nÂ  Â  Â  \"query_conditions\": [\"å…³é”®è¯1\", \"å…³é”®è¯2\"\
            , \"åŒä¹‰è¯\"],\nÂ  Â  Â  \"query_type\": \"èŒä¸šç‰¹æ€§|ç§æ—æ–‡åŒ–|å†å²èƒŒæ™¯|èŒä¸šå¯¹æ¯”\",\nÂ  Â  Â  \"\
            query_context\": \"ç®€è¦è¯´æ˜å½“å‰å¯¹è¯é˜¶æ®µå’Œä¸Šä¸‹æ–‡\"\nÂ  Â  }\nÂ  Â  \nÂ  Â  # ç¤ºä¾‹\nÂ  Â  ç”¨æˆ·è¯´ï¼š\"\
            æˆ‘æ›´å–œæ¬¢ç”¨é­”æ³•è§£å†³é—®é¢˜\"\nÂ  Â  è¾“å‡ºï¼š\nÂ  Â  {\nÂ  Â  Â  \"query_conditions\": [\"é­”æ³•èŒä¸š\",\
            \ \"æ³•å¸ˆ\", \"æœ¯å£«\", \"ç‰§å¸ˆ\", \"é­”æ³•å¤©èµ‹\"],\nÂ  Â  Â  \"query_type\": \"èŒä¸šç‰¹æ€§\",\n\
            Â  Â  Â  \"query_context\": \"ç”¨æˆ·åœ¨è¡¨è¾¾æˆ˜æ–—åå¥½ï¼Œå€¾å‘äºæ–½æ³•è€…\"\nÂ  Â  }"
        selected: false
        title: çŸ¥è¯†æ£€ç´¢é¢„å¤„ç†
        type: llm
        vision:
          enabled: false
      height: 88
      id: '1770122768993'
      position:
        x: 1790
        y: 562
      positionAbsolute:
        x: 1790
        y: 562
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        classes:
        - id: '1'
          name: "æ²‰æµ¸å¼è§’è‰²æ‰®æ¼” (IC - In Character)\nç‰¹å¾ï¼š\n - é¡ºç€é…’é¦†è€æ¿çš„è¯é¢˜è¿›è¡Œå›åº”ã€‚\n - åŒ…å«å…·ä½“çš„è§’è‰²è¡Œä¸ºï¼ˆå¦‚ï¼šç‚¹é…’ã€åä¸‹ã€æ•´ç†è£…å¤‡ï¼‰ã€‚\n\
            \ - è¡¨è¾¾èŒä¸š/ç§æ—æ„å‘ï¼ˆæ— è®ºæ˜¯æ¨¡ç³Šçš„è¿·èŒ«ï¼Œè¿˜æ˜¯ç¡®å®šçš„é€‰æ‹©ï¼Œåªè¦æ˜¯åœ¨å‰§æƒ…è¯­å¢ƒä¸‹ï¼‰ã€‚\n - ç¤ºä¾‹ï¼šâ€œæ¥ä¸€æ¯ç”Ÿå•¤â€ã€â€œæˆ‘æƒ³å½“ä¸ªæ¸¸ä¾ â€ã€â€œæˆ‘æ˜¯ä»åŒ—å¢ƒæ¥çš„â€ã€‚"
        - id: '2'
          name: "ç³»ç»Ÿ/æ•°å€¼å’¨è¯¢ (OOC - Out of Character)\nç‰¹å¾ï¼š\n - ç”¨æˆ·è·³å‡ºå‰§æƒ…è¯­å¢ƒï¼Œç›´æ¥è¯¢é—®æ¸¸æˆæœºåˆ¶ã€æ•°å€¼ã€æ”»ç•¥æˆ–ç›´æ¥ä¸‹è¾¾ç³»ç»ŸæŒ‡ä»¤ã€‚\n\
            \ - è¯¢é—®éå‰§æƒ…å¼ºç›¸å…³çš„ç¡¬æ€§æ•°æ®ã€‚\n - ç¤ºä¾‹ï¼šå¦‚â€œæˆ˜å£«çš„æ”»å‡»åŠ›æ˜¯å¤šå°‘ï¼Ÿâ€ã€â€œå“ªä¸ªç§æ—æœ€å¼ºï¼Ÿâ€ã€â€œç»™æˆ‘çœ‹èŒä¸šåˆ—è¡¨â€ã€‚"
        desc: åˆ¤æ–­ç”¨æˆ·RPæ„æ„¿åŠæ˜¯å¦å·²æœ‰é€‰æ‹©
        instruction: "# åˆ†ç±»ä»»åŠ¡\n æ ¹æ®ç”¨æˆ·è¾“å…¥åˆ¤æ–­å¯¹è¯ç±»å‹ \n# èƒŒæ™¯\n ä½ æ˜¯ä¸€ä¸ªé…’é¦†è€æ¿ï¼Œæ­£åœ¨å¼•å¯¼æ–°ç©å®¶è¿›å…¥è§’è‰²æ‰®æ¼”ä¸–ç•Œã€‚\n\n\
          {{#conversation.first_question#}}\n\n#ç”¨æˆ·è¾“å…¥\n{{#sys.query#}}"
        instructions: ''
        memory:
          query_prompt_template: '{{#sys.query#}}


            {{#sys.files#}}'
          window:
            enabled: true
            size: 4
        model:
          completion_params:
            temperature: 0.7
          mode: chat
          name: deepseek-chat
          provider: langgenius/deepseek/deepseek
        query_variable_selector:
        - sys
        - query
        selected: false
        title: åˆ¤æ–­ç”¨æˆ·RPæ„æ„¿
        type: question-classifier
        vision:
          enabled: false
      height: 198
      id: '1770179022421'
      position:
        x: 1066
        y: 127
      positionAbsolute:
        x: 1066
        y: 127
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        answer: "ï¼ˆè€æ¿æ”¾ä¸‹é…’æ¯ï¼Œè®¤çœŸåœ°çœ‹ç€ä½ ï¼‰\n  \n  å•Šï¼Œçœ‹æ¥ä½ å¿ƒé‡Œå·²ç»æœ‰äº†æ˜ç¡®çš„å¿µå¤´ï¼åœ¨è¿™ç‰‡å¹¿é˜”çš„åœŸåœ°ä¸Šï¼Œæ¯ä¸ªå†’é™©è€…éƒ½æœ‰è‡ªå·±çš„é“è·¯è¦é—¯ã€‚æ—¢ç„¶ä½ å·²ç»æœ‰äº†æ–¹å‘ï¼Œæˆ‘å°±ä¸å¤šå¨æ‰°äº†ã€‚\n\
          \  \n  ä¸è¿‡è®°ä½ï¼Œä¼™è®¡ï¼šåŠ›é‡çš„å¼ºå¼±ä¼šéšé£äº‘å˜å¹»ï¼Œä½†çœŸæ­£å¡‘é€ ä¼ å¥‡çš„ï¼Œæ˜¯ä¸€é¢—åšå®šçš„å¿ƒã€‚æ— è®ºä½ é€‰æ‹©ä»€ä¹ˆé“è·¯ï¼Œéƒ½å‹‡æ•¢åœ°èµ°ä¸‹å»å§ï¼"
        selected: false
        title: æ— RPæ„æ„¿å›å¤
        type: answer
        variables: []
      height: 212
      id: '1770179245235'
      position:
        x: 1428
        y: 87
      positionAbsolute:
        x: 1428
        y: 87
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        classes:
        - id: '1'
          name: 'ç‰¹å¾ï¼š

            - é¡ºç€é…’é¦†è€æ¿çš„è¯é¢˜è¿›è¡Œå›åº”ã€‚

            - ç”¨æˆ·ç»™å‡ºè¿‡å­˜åœ¨å€¾å‘æ€§çš„ç­”æ¡ˆã€‚

            - ç”¨æˆ·æœªå¦è®¤å…¨éƒ¨é€»è¾‘ä¸é—®é¢˜ã€‚'
        - id: '2'
          name: 'ç‰¹å¾ï¼š

            - ç”¨æˆ·å¦è®¤äº†ä¸€åˆ‡é€»è¾‘ä¸é—®é¢˜ã€‚

            - ç”¨æˆ·æœªç»™å‡ºä»»ä½•å­˜åœ¨å€¾å‘æ€§çš„ç­”æ¡ˆã€‚'
        instruction: '# åˆ†ç±»ä»»åŠ¡

          ç»¼åˆä¸Šä¸‹æ–‡å’Œç”¨æˆ·è¾“å…¥åˆ¤æ–­ç”¨æˆ·æ„å›¾


          {{#conversation.first_question#}}


          # ç”¨æˆ·è¾“å…¥

          {{#sys.query#}}

          '
        instructions: ''
        memory:
          query_prompt_template: '{{#sys.query#}}


            {{#sys.files#}}'
          window:
            enabled: true
            size: 20
        model:
          completion_params:
            temperature: 0.7
          mode: chat
          name: deepseek-chat
          provider: langgenius/deepseek/deepseek
        query_variable_selector:
        - sys
        - query
        selected: true
        title: åˆ¤æ–­æ˜¯å¦åœ¨è¯é¢˜é€»è¾‘å†…å¯¹è¯
        type: question-classifier
        vision:
          enabled: false
      height: 170
      id: '1770379526302'
      position:
        x: 1428
        y: 379
      positionAbsolute:
        x: 1428
        y: 379
      selected: true
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        context:
          enabled: true
          variable_selector:
          - sys
          - query
        memory:
          query_prompt_template: '{{#sys.query#}}


            {{#sys.files#}}'
          role_prefix:
            assistant: ''
            user: ''
          window:
            enabled: true
            size: 20
        model:
          completion_params: {}
          mode: chat
          name: deepseek-reasoner
          provider: langgenius/deepseek/deepseek
        prompt_template:
        - id: c88f86e3-ce08-453b-97b2-78f1e5a5e154
          role: system
          text: "    # è§’è‰²\n    ä½ æ˜¯ä¸€ä¸ªæ„å›¾è§£é‡Šå™¨\n\n    # èƒŒæ™¯\n    åˆ°è¾¾æ­¤èŠ‚ç‚¹è¯´æ˜ç”¨æˆ·åœ¨å‰ç½®å¯¹è¯ä¸­ç”¨æˆ·å¦è®¤äº†ä¸€åˆ‡é€»è¾‘ä¸é—®é¢˜ï¼Œæˆ–æœªç»™å‡ºä»»ä½•å­˜åœ¨å€¾å‘æ€§çš„ç­”æ¡ˆã€‚\n\
            \nÂ  Â  # ä»»åŠ¡\nÂ  Â  æ ¹æ®ç”¨æˆ·å¯¹è¯å†…å®¹å’Œä¸Šä¸‹æ–‡ï¼Œç”ŸæˆçŸ¥è¯†åº“æ£€ç´¢æ¡ä»¶\nÂ  Â  \nÂ  Â  # è¾“å…¥åˆ†æ\nÂ  Â  1. æå–å…³é”®è¯ï¼šä»å¯¹è¯ä¸­æå–èŒä¸šã€ç§æ—ã€ç‰¹æ€§ç›¸å…³è¯æ±‡\n\
            Â  Â  2. è¯†åˆ«æ„å›¾ï¼šåˆ¤æ–­ç”¨æˆ·å½“å‰è®¨è®ºçš„ä¸»é¢˜é˜¶æ®µ\nÂ  Â  3. æ¨æ–­éœ€æ±‚ï¼šåŸºäºå¯¹è¯å†å²æ¨æµ‹å¯èƒ½éœ€è¦çš„èƒŒæ™¯çŸ¥è¯†\n\nÂ  Â  # é™åˆ¶\n\
            \    1. ç¦æ­¢è¾“å‡ºæ–‡å­—æç¤ºå’Œä»»ä½•markdownæ ‡è¯†\n\nÂ  Â  # è¾“å‡ºæ ¼å¼\nJSONæ ¼å¼\nÂ  Â  {\nÂ  Â  Â  \"query_conditions\"\
            : [\"å…³é”®è¯1\", \"å…³é”®è¯2\", \"åŒä¹‰è¯\"],\nÂ  Â  Â  \"query_type\": \"èŒä¸šç‰¹æ€§|ç§æ—æ–‡åŒ–|å†å²èƒŒæ™¯|èŒä¸šå¯¹æ¯”\"\
            ,\nÂ  Â  Â  \"query_context\": \"ç®€è¦è¯´æ˜å½“å‰å¯¹è¯é˜¶æ®µå’Œä¸Šä¸‹æ–‡\"\nÂ  Â  }\nÂ  Â  \nÂ  Â  # ç¤ºä¾‹\n\
            Â  Â  ç”¨æˆ·è¯´ï¼š\"æˆ‘æ›´å–œæ¬¢ç”¨é­”æ³•è§£å†³é—®é¢˜\"\nÂ  Â  è¾“å‡ºï¼š\nÂ  Â  {\nÂ  Â  Â  \"query_conditions\": [\"\
            é­”æ³•èŒä¸š\", \"æ³•å¸ˆ\", \"æœ¯å£«\", \"ç‰§å¸ˆ\", \"é­”æ³•å¤©èµ‹\"],\nÂ  Â  Â  \"query_type\": \"èŒä¸šç‰¹æ€§\"\
            ,\nÂ  Â  Â  \"query_context\": \"ç”¨æˆ·åœ¨è¡¨è¾¾æˆ˜æ–—åå¥½ï¼Œå€¾å‘äºæ–½æ³•è€…\"\nÂ  Â  }"
        - id: 629d8357-6479-4a7f-abe8-29ef6f8bd50b
          role: user
          text: '{{#sys.query#}}'
        reasoning_format: separated
        selected: false
        title: çŸ¥è¯†æ£€ç´¢é¢„å¤„ç†-æ— å€¾å‘æ€§æ‰©å±•æŸ¥è¯¢
        type: llm
        vision:
          enabled: false
      height: 88
      id: '1770380223078'
      position:
        x: 1790
        y: 392
      positionAbsolute:
        x: 1790
        y: 392
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        dataset_ids:
        - hK9chCbrtmWQKT7Tgj593kGCGzbxMYdlJ9n2y9pNerhLIQl9Lx1+AQm0fh2/a3tB
        metadata_filtering_mode: automatic
        metadata_model_config:
          completion_params:
            response_format: json_object
            temperature: 0.7
          mode: chat
          name: deepseek-chat
          provider: langgenius/deepseek/deepseek
        multiple_retrieval_config:
          reranking_enable: false
          reranking_mode: reranking_model
          top_k: 4
        query_attachment_selector: []
        query_variable_selector:
        - '1770380223078'
        - text
        retrieval_mode: multiple
        selected: false
        title: çŸ¥è¯†æ£€ç´¢-æ— å€¾å‘æ€§èŠ‚ç‚¹
        type: knowledge-retrieval
      height: 90
      id: '17703806152700'
      position:
        x: 2132
        y: 391
      positionAbsolute:
        x: 2132
        y: 391
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        context:
          enabled: true
          variable_selector:
          - '17703806152700'
          - result
        memory:
          query_prompt_template: '{{#sys.query#}}


            '
          role_prefix:
            assistant: ''
            user: ''
          window:
            enabled: true
            size: 20
        model:
          completion_params: {}
          mode: chat
          name: deepseek-reasoner
          provider: langgenius/deepseek/deepseek
        prompt_config:
          jinja2_variables: []
        prompt_template:
        - edition_type: basic
          id: 2b37e594-98ab-402c-9449-8773f0ef5460
          jinja2_text: ''
          role: system
          text: "<system_purpose>\nä½ æ˜¯ä¸€ä¸ªã€Šé­”å…½ä¸–ç•Œã€‹ä¸–ç•Œè§‚ä¸‹çš„æ‰®æ¼”é…’é¦†è€æ¿ã€‚\n</system_purpose>\n\n\n\
            <character_setting>\n- èº«ä»½ï¼šè‰¾æ³½æ‹‰æ–¯å¤§é™†æŸå¤„æ¸©æƒ…é…’é¦†çš„è€æ¿ã€‚\n- è¯­æ°”ï¼šäº²åˆ‡ã€ç¿æ™ºã€å¸¦æœ‰å†’é™©æ°”æ¯ï¼Œå¤šç”¨å£è¯­åŒ–çš„è§’è‰²æ‰®æ¼”æè¿°ã€‚\n\
            </character_setting>\n\n\n<task_rules>\n- æ ¸å¿ƒä»»åŠ¡ï¼šæ ¹æ® <knowledge_base> ä¸­çš„ä¿¡æ¯ï¼Œé€šè¿‡å¯¹è¯å¼•å¯¼ç©å®¶é€‰æ‹©èŒä¸šå’Œç§æ—ã€‚\n\
            - å¼•å¯¼è§„åˆ™ï¼š\nÂ  1. è€ƒå¯Ÿç‚¹ï¼šå–„æ¶è§‚ã€åŠ›é‡å€¾å‘ï¼ˆé­”æ³•/ç‰©ç†ï¼‰ã€ä½œæˆ˜è·ç¦»ï¼ˆè¿‘æˆ˜/è¿œç¨‹ï¼‰ã€èŒè´£ï¼ˆå¦å…‹/æ²»ç–—/è¾“å‡ºï¼‰ã€æ­¦å™¨ç­‰ã€‚\nÂ  2.\
            \ å½¢å¼ï¼šæ¯æ¬¡å¯¹è¯ä»…æå‡º 2-4 ä¸ªé—®é¢˜ï¼Œä¸¥ç¦ä½¿ç”¨ç¼–å·åˆ—è¡¨ï¼ˆå¦‚ 1. 2. 3.ï¼‰ã€‚\nÂ  3. é™åˆ¶ï¼š20 è½®å¯¹è¯å†…å¿…é¡»ç»™å‡ºæ˜ç¡®å»ºè®®ã€å»ºè®®çš„èŒä¸šå’Œç§æ—å¿…é¡»æ˜¯é­”å…½ä¸–ç•Œä¸­ç©å®¶å¯é€‰æ‹©ï¼›å®Œæˆæ¨èå‰ä¸¥ç¦é€éœ²ä»»ä½•å€¾å‘æ€§ç»“è®ºï¼›ç¦æ­¢ä½¿ç”¨æ¸¸æˆæœ¯è¯­ã€‚\n\
            </task_rules>\n\n\n<knowledge_base>\n{{#1770380223078.text#}}\n</knowledge_base>\n\
            \n\n<pre_node_analysis>\n    å½“å‰èŠ‚ç‚¹å·²æ¥æ”¶æ¥è‡ª [é—®é¢˜åˆ†ç±»å™¨] çš„è¿‡æ»¤ä¿¡å·ã€‚ å¦‚æœç”¨æˆ·è¡¨ç°å‡ºâ€œæ‹’ç»å›ç­”â€ã€â€œå¦å®šé€»è¾‘â€æˆ–â€œå‹åŠ›æµ‹è¯•â€ï¼Œè¯´æ˜æµç¨‹å·²è¿›å…¥â€œéæ ‡å‡†å¼•å¯¼ç¯èŠ‚â€ã€‚\
            \ </pre_node_analysis>\n\n\n<context_background> \n    <scene_state> \n\
            \        é…’é¦†è€æ¿ï¼ˆä½ ï¼‰å·²ç»å‘å®¢äººï¼ˆç”¨æˆ·ï¼‰å‘å‡ºäº†é‚€è¯·ï¼Œä½†å®¢äººçš„ååº”å¯èƒ½å¹¶ä¸ç§¯æã€‚\n     </scene_state>\n  \
            \   <mission_objective> \n        1. ä¿æŒé…’é¦†è€æ¿çš„äººè®¾ï¼Œæ— è®ºç”¨æˆ·å¦‚ä½•æŒ‘è¡…æˆ–æ‹’ç»ï¼Œä¸å¾—è„±ç¦»è§’è‰²ã€‚ \n\
            \        2. é’ˆå¯¹â€œå¦å®šå›ç­”â€ï¼Œä¸è¦å¼ºè¡Œæ¨è¿›é—®å·ï¼Œè€Œæ˜¯åˆ©ç”¨è§’è‰²èº«ä»½è¿›è¡Œè½¯å¤„ç†ï¼ˆä¾‹å¦‚ï¼šæ„Ÿå¹å®¢äººçš„è°¨æ…ï¼Œæˆ–ç”¨å¹½é»˜åŒ–è§£å°´å°¬ï¼‰ã€‚ \n \
            \       3. ä¸¥ç¦æä¾›å¸¦æœ‰æ•°å€¼å¼ºåº¦çš„â€œæ ‡å‡†ç­”æ¡ˆâ€ï¼Œå³ä½¿è¢«ç”¨æˆ·é€¼é—®ï¼Œä¹Ÿè¦ä»¥â€œæ¯ä¸ªäººçœ¼ä¸­çš„å¼ºå¼±ä¸åŒâ€ä¸ºç”±åŒ–è§£ã€‚ \n     </mission_objective>\
            \ \n</context_background> \n<handling_strategies> \n    <on_negation>\n\
            \        å½“ç”¨æˆ·å¦å®šæˆ–æ‹’ç»æ—¶ï¼Œé…’é¦†è€æ¿åº”è¡¨ç°å‡ºåŒ…å®¹ï¼Œå¯ä»¥èŠèŠé…’é¦†é‡Œçš„ä¼ é—»ï¼Œæˆ–è€…æ¢ä¸€ç§æ›´å§”å©‰çš„åˆ‡å…¥ç‚¹ã€‚\n    </on_negation>\
            \ \n    <on_bias_test>\n        å½“ç”¨æˆ·æµ‹è¯•å€¾å‘æ€§æ—¶ï¼Œå¼ºè°ƒâ€œå‘½è¿æŒæ¡åœ¨ä½ è‡ªå·±æ‰‹é‡Œï¼Œæˆ‘åªæ˜¯ä¸ªå€’é…’çš„â€ã€‚\n  \
            \  </on_bias_test>\n</handling_strategies>\n\n{{#conversation.first_question#}}\n\
            \n{{#conversation.first_response_guideline#}}"
        selected: false
        title: ä¸»è¦å›å¤é€»è¾‘-æ— å€¾å‘æ€§èŠ‚ç‚¹
        type: llm
        vision:
          enabled: false
      height: 88
      id: '17703806754120'
      position:
        x: 2474
        y: 392
      positionAbsolute:
        x: 2474
        y: 392
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        cases:
        - case_id: 'true'
          conditions:
          - comparison_operator: '='
            id: e299bfee-87dc-4df7-a01f-4d7126e6669f
            value: '1'
            varType: number
            variable_selector:
            - sys
            - dialogue_count
          id: 'true'
          logical_operator: and
        selected: false
        title: ç¬¬ä¸€è½®å¯¹è¯åˆ¤æ–­
        type: if-else
      height: 124
      id: '1770574037546'
      position:
        x: 342
        y: 123
      positionAbsolute:
        x: 342
        y: 123
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        items:
        - input_type: constant
          operation: set
          value: '<context>

            <salutatory_oration>

            é…’é¦†è€æ¿ï¼šâ€œå•Šï¼Œä¸€ä½è¿œé“è€Œæ¥çš„å®¢äººï¼çœ‹ä½ é£å°˜ä»†ä»†çš„æ ·å­ï¼Œæ˜¯ä»è’éƒŠé‡å²­çš„æ—§è·¯èµ¶æ¥ï¼Œè¿˜æ˜¯ä¹˜èˆ¹è·¨è¿‡æ— å°½ä¹‹æµ·ï¼Ÿæˆ‘æ˜¯è¿™çš„è€æ¿ã€‚åå§ï¼Œåˆ«æ‹˜æŸâ€”â€”è¿™å„¿çš„é…’èƒ½æ´—å»ä¸€èº«ç–²æƒ«ã€‚ä¸è¿‡è¯è¯´å›æ¥ï¼Œæˆ‘è§è¿‡æ— æ•°åƒä½ è¿™æ ·çš„å†’é™©è€…ï¼Œæ¯ä¸ªäººéƒ½æœ‰è‡ªå·±çš„æ•…äº‹å’Œé“è·¯â€¦â€¦å‘Šè¯‰æˆ‘ï¼Œæ˜¯ä»€ä¹ˆé£æŠŠä½ å¹åˆ°è¿™é…’é¦†æ¥çš„ï¼Ÿæ˜¯å•çº¯æƒ³å–ä¸€æ¯æš–æš–èº«å­ï¼Œè¿˜æ˜¯å¿ƒé‡Œæ—©æœ‰äº†äº›æ¨¡ç³Šçš„å¿µå¤´ï¼Œæƒ³åœ¨è¿™å¹¿é˜”ä¸–ç•Œé‡Œæ‰¾ä¸ªå±äºè‡ªå·±çš„ä½ç½®ï¼Ÿâ€

            </salutatory_oration>

            </context>'
          variable_selector:
          - conversation
          - first_question
          write_mode: over-write
        selected: false
        title: è®¾å®šå¼€åœºç™½
        type: assigner
        version: '2'
      height: 84
      id: '1770575052659'
      position:
        x: 704
        y: 0
      positionAbsolute:
        x: 704
        y: 0
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        items:
        - input_type: constant
          operation: set
          value: '<response_guideline>

            Â  Â  - å¦‚æœç©å®¶çš„å›å¤æ˜¯é’ˆå¯¹æ¬¢è¿è¯çš„ï¼ˆä¾‹å¦‚â€œæˆ‘æƒ³æ‰¾ä¸ªèŒä¸šâ€ï¼‰ï¼Œè¯·ç«‹åˆ»è¿›å…¥èŒä¸šè¯¢é—®çš„ç¬¬ä¸€æ­¥ã€‚

            Â  Â  - ä¸¥ç¦é‡å¤å¼€åœºç™½çš„å†…å®¹ï¼Œç›´æ¥ä»å¯¹è¯çš„ç¬¬äºŒé˜¶æ®µå¼€å§‹ã€‚

            </response_guideline>'
          variable_selector:
          - conversation
          - first_response_guideline
          write_mode: over-write
        selected: false
        title: è®¾å®šå¼€åœºç™½å›å¤æŒ‡å¯¼
        type: assigner
        version: '2'
      height: 84
      id: '1770575683326'
      position:
        x: 704
        y: 164
      positionAbsolute:
        x: 704
        y: 164
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        items:
        - input_type: variable
          operation: clear
          value: ''
          variable_selector:
          - conversation
          - first_question
          write_mode: over-write
        selected: false
        title: æ¸…ç©ºå¼€åœºç™½
        type: assigner
        version: '2'
      height: 84
      id: '1770575919957'
      position:
        x: 704
        y: 328
      positionAbsolute:
        x: 704
        y: 328
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        items:
        - input_type: variable
          operation: clear
          value: ''
          variable_selector:
          - conversation
          - first_response_guideline
          write_mode: over-write
        selected: false
        title: æ¸…ç©ºå¼€åœºç™½å›å¤æŒ‡å¯¼
        type: assigner
        version: '2'
      height: 84
      id: '1770575925535'
      position:
        x: 704
        y: 492
      positionAbsolute:
        x: 704
        y: 492
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    viewport:
      x: -122.58672435143922
      y: 178.62450458982764
      zoom: 0.8040888484979247
  rag_pipeline_variables: []
